package com.oifm.link;

public interface OILinkSqls 
{
    //public final static String HOTTEST_THREAD = "select * from( select * from( SELECT distinct TITLE,'H' TTYPE,T.THREADID,P.POSTED_ON,hot.count FROM OI_FM_THREAD T, OI_FM_POSTS P, (SELECT THREADS.THREADID, MEMBERS.USERID  FROM OI_FM_THREAD THREADS, OI_FM_THREAD_GROUPS THREAD_GROUPS, OI_FM_GROUPMEMBERS MEMBERS  WHERE THREADS.THREADID=THREAD_GROUPS.THREADID   AND THREAD_GROUPS.GROUPID = MEMBERS.GROUPID AND MEMBERS.USERID=?) MEMB , (select count(*) count,tt.THREADID ttTHREADID from OI_FM_POSTS countPt,OI_FM_THREAD tt where tt.THREADID=countPt.THREADID and countPt.POSTED_ON> (SYSDATE - (select VALUE from OI_AD_CONFIGURATION where TAG='CATEGORISETHREADS')) group by tt.THREADID ) hot WHERE T.THREADID=P.THREADID and hot.ttTHREADID=T.THREADID and (select count(*) from OI_FM_POSTS countPost where countPost.POSTED_ON> (SYSDATE - (select VALUE from OI_AD_CONFIGURATION where TAG='CATEGORISETHREADS')) and countPost.THREADID=P.THREADID)>= (select VALUE from OI_AD_CONFIGURATION where TAG='HOTTOPIC') and T.THREADID=MEMB.THREADID(+) AND ((MEMB.USERID=? AND T.SECURITY='Y') OR T.SECURITY ='N' ) and T.MODERATION_STAT='Y' and P.POSTED_ON=T.LASTPOST_ON ORDER BY P.POSTED_ON DESC ) UNION select * from( SELECT distinct TITLE,'L' TTYPE,T.THREADID,P.POSTED_ON,hot.count FROM OI_FM_THREAD T,OI_FM_POSTS P, (SELECT THREADS.THREADID, MEMBERS.USERID  FROM OI_FM_THREAD THREADS, OI_FM_THREAD_GROUPS THREAD_GROUPS, OI_FM_GROUPMEMBERS MEMBERS  WHERE THREADS.THREADID=THREAD_GROUPS.THREADID   AND THREAD_GROUPS.GROUPID = MEMBERS.GROUPID AND MEMBERS.USERID= ?) MEMB , (select count(*) count,tt.THREADID ttTHREADID from OI_FM_POSTS countPt,OI_FM_THREAD tt where tt.THREADID=countPt.THREADID and countPt.POSTED_ON> (SYSDATE - (select VALUE from OI_AD_CONFIGURATION where TAG='CATEGORISETHREADS')) group by tt.THREADID ) hot WHERE T.THREADID=P.THREADID and hot.ttTHREADID=T.THREADID and P.POSTED_ON > (SYSDATE - (select VALUE from OI_AD_CONFIGURATION where TAG='LATESTTOPIC')) and T.THREADID=MEMB.THREADID(+) AND ((MEMB.USERID= ? AND  T.SECURITY='Y') OR T.SECURITY ='N') and T.MODERATION_STAT='Y' and P.POSTED_ON=T.LASTPOST_ON ORDER BY P.POSTED_ON DESC) ) ORDER BY count desc,POSTED_ON desc,THREADID";
    public final static String POSTING_DETAILS = "select * from(select topic.topicid,topicName,thread.THREADID,thread.TITLE,post.POSTED_ON,post.NICKNAME,  post.POSTED_BY,thread.CREATED_BY,thread.CREATED_ON from OI_FM_TOPIC topic,OI_FM_THREAD thread,OI_FM_POSTS post, ( SELECT THREADS.THREADID, MEMBERS.USERID   FROM OI_FM_THREAD THREADS, OI_FM_THREAD_GROUPS THREAD_GROUPS,  OI_FM_GROUPMEMBERS MEMBERS  WHERE THREADS.THREADID= THREAD_GROUPS.THREADID   AND THREAD_GROUPS.GROUPID = MEMBERS.GROUPID  AND MEMBERS.USERID= ?) MEMB where  topic.TOPICID=thread.TOPICID and  post.POSTED_ON=(select max(post1.POSTED_ON) from OI_FM_POSTS  post1 where  post1.THREADID=thread.THREADID)  and post.POSTID=thread.LASTPOST_ID and thread.THREADID=MEMB.THREADID(+) AND  (((MEMB.USERID= ? or thread.created_by=?) AND thread.SECURITY='Y') OR thread.SECURITY ='N') ) a, (select count(*)  count,topic.TOPICID tTOPICID from OI_FM_TOPIC topic,OI_FM_THREAD thread where topic.TOPICID=thread.TOPICID and thread.MODERATION_STAT='Y' group by topic.TOPICID ) b where a.topicid=b.tTOPICID order by topicId desc, POSTED_ON desc";
}
